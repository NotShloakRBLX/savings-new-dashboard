<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>Accounts • Savings & Checking</title>
<style>
  :root{
    --bg:#0b0b0b;
    --bg2:#0f0f10;
    --tile:#17181a;
    --tileBorder:#26272b;
    --text:#fff;
    --muted:#9aa0a6;
    --shadow:0 18px 50px rgba(0,0,0,.45);
    --t:.28s cubic-bezier(.2,.8,.2,1);
    --radius:18px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:linear-gradient(#0a0a0a,#0a0a0a 60%,#090909);color:var(--text);
       font:15px -apple-system,BlinkMacSystemFont,"SF Pro Text",Inter,Segoe UI,Roboto,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased}
  .app{max-width:430px;height:100svh;margin:0 auto;position:relative;overflow:hidden}
  .views{display:flex;width:200%;height:100%;transition:transform var(--t)}
  .pos-savings .views{transform:translateX(0)}
  .pos-checking .views{transform:translateX(-50%)}
  .view{width:100%;height:100%;overflow:auto;padding-bottom:28px}
  .view::-webkit-scrollbar{width:0;height:0}

  .nav{position:sticky;top:0;z-index:5;display:flex;align-items:center;justify-content:space-between;
       padding:18px 16px 10px;background:linear-gradient(180deg,rgba(10,10,10,.96),rgba(10,10,10,.6) 40%,transparent);
       -webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}
  .nav h1{margin:0;font-size:40px;font-weight:900;letter-spacing:-.5px}
  .iconrow{display:flex;gap:10px}
  .iconbtn{width:36px;height:36px;border-radius:999px;background:#141517;border:1px solid #2a2c31;display:grid;place-items:center}
  .content{padding:8px 12px 26px}

  .card{background:var(--tile);border:1px solid var(--tileBorder);border-radius:22px;padding:16px 16px 18px;box-shadow:var(--shadow)}
  .row2{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:14px}
  .btn{border-radius:16px;padding:14px 18px;font-weight:900;border:1px solid var(--tileBorder);background:var(--tile);color:#fff}
  .btn.light{background:#fff;color:#000;border-color:#fff}
  .pill{padding:10px 14px;border-radius:14px;border:1px solid var(--tileBorder);background:#15161a;display:flex;justify-content:space-between;align-items:center}
  .pill strong{font-size:18px}
  .titleLg{font-size:28px;font-weight:900;margin:0}
  .sub{color:var(--muted)}
  .apy{margin-left:auto;background:#15161a;border:1px solid var(--tileBorder);padding:10px 14px;border-radius:14px;font-weight:900}

  .sectionTitle{margin:18px 4px 10px;font-size:26px;font-weight:900}
  .listWrap{background:rgba(255,255,255,.04);border:1px solid var(--tileBorder);border-radius:18px;padding:14px}
  .empty{display:grid;place-items:center;height:64px;border-radius:12px;background:rgba(255,255,255,.04);border:1px dashed #2a2c31;color:#a3a7ad}

  /* Money keypad full-sheet */
  .moneySheet{position:fixed;inset:0;z-index:30;background:#fff;color:#000;transform:translateY(100%);
              transition:transform var(--t);display:flex;flex-direction:column}
  .moneySheet.active{transform:translateY(0)}
  .msTop{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #e8e8ea}
  .msTop .link{color:#0a84ff;font-weight:600}
  .msTop .action{color:#0a84ff;font-weight:700;opacity:.4}
  .msTop .action.enabled{opacity:1}
  .msAmount{flex:1;display:grid;place-items:center}
  .msAmount .amt{font-size:62px;font-weight:900}
  .msAvail{margin-top:6px;color:#6b6f76;font-weight:600}
  .pad{margin-top:auto;border-top:1px solid #eee}
  .gridPad{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;background:#ddd}
  .gridPad button{background:#fff;border:0;padding:18px 0;font-size:28px}
  .gridPad button:active{background:#f0f0f3}
  .padRow{display:grid;grid-template-columns:repeat(3,1fr)}
  .padRow button{border-top:1px solid #eee;padding:16px 0;font-size:22px}
  .keyWide{font-size:24px}

  /* Stage 2: transfer card */
  .transferStage{position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.45);
                 z-index:31;opacity:0;pointer-events:none;transition:opacity var(--t)}
  .transferStage.active{opacity:1;pointer-events:auto}
  .transferCard{width:92%;max-width:430px;background:#111215;color:#fff;border:1px solid #27282d;border-radius:20px;
                box-shadow:var(--shadow);transform:translateY(12px) scale(.98);transition:transform var(--t),opacity var(--t);opacity:.6}
  .transferStage.active .transferCard{transform:translateY(0) scale(1);opacity:1}
  .tcHead{padding:14px 16px;border-bottom:1px solid #27282d;font-weight:900}
  .tcBody{padding:14px 16px}
  .mini{color:#a5abb1;font-weight:700;margin-bottom:6px}
  .box{background:#15171b;border:1px solid #2a2c31;border-radius:12px;padding:12px 14px;display:flex;justify-content:space-between;align-items:center}
  .box + .mini{margin-top:12px}
  .select{position:relative}
  .menu{position:absolute;left:0;right:0;top:100%;margin-top:6px;background:#0f1013;border:1px solid #2a2c31;border-radius:12px;overflow:hidden;display:none}
  .menu.show{display:block}
  .menu button{width:100%;text-align:left;background:transparent;border:0;color:#fff;padding:12px 14px}
  .tcFoot{display:flex;gap:10px;padding:12px 16px 16px}
  .btnGray{flex:1;background:#1b1d22;border:1px solid #2f3137;color:#fff;border-radius:12px;padding:12px;font-weight:900}
  .btnGreen{flex:1;background:#1ec773;border:1px solid #1ec773;border-radius:12px;color:#000;padding:12px;font-weight:900;opacity:.45}
  .btnGreen.enabled{opacity:1}

  /* Small helpers */
  .amountBig{font-size:26px;font-weight:900}
  .sp{flex:1}
</style>
</head>
<body>
<div class="app pos-savings" id="app">

  <div class="views">
    <!-- SAVINGS ------------------------------------------------------------>
    <section class="view" id="savings">
      <div class="nav">
        <h1>Savings</h1>
        <div class="iconrow">
          <div class="iconbtn" title="Search">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="#fff"><path opacity=".9" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 10-.7.7l.27.28v.79l5 4.99L20.49 19l-4.99-5zM9.5 14C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
          </div>
          <div class="iconbtn" id="savingsAddTxnBtn" title="Add transaction">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="#fff"><path d="M11 11V6h2v5h5v2h-5v5h-2v-5H6v-2z"/></svg>
          </div>
          <div class="iconbtn" title="More">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="#fff"><circle cx="12" cy="5" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="19" r="2"/></svg>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="card">
          <div style="display:flex;align-items:center;gap:12px">
            <div>
              <div class="sub" style="font-weight:900;opacity:.9">Current Balance</div>
              <div class="titleLg" id="savingsBal">$70.19</div>
            </div>
            <div class="apy">184% APY</div>
          </div>
        </div>

        <div class="row2">
          <button class="btn" id="savWithdrawBtn">Withdraw</button>
          <button class="btn light" id="savAddBtn">Add Money</button>
        </div>

        <div class="pill" id="gotoChecking" style="margin:14px 2px 0">
          <strong>Checking</strong><span class="sp"></span><strong id="checkingSmall">$414.00</strong>
        </div>

        <div class="sectionTitle">Latest Transactions</div>
        <div class="listWrap" id="savTxnList">
          <div class="empty">No transactions yet</div>
        </div>
      </div>
    </section>

    <!-- CHECKING ------------------------------------------------------------>
    <section class="view" id="checking">
      <div class="nav">
        <h1>Checking</h1>
        <div class="iconrow">
          <div class="iconbtn" title="Search">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="#fff"><path opacity=".9" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 10-.7.7l.27.28v.79l5 4.99L20.49 19l-4.99-5zM9.5 14C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
          </div>
          <div class="iconbtn" id="checkingAddTxnBtn" title="Add transaction">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="#fff"><path d="M11 11V6h2v5h5v2h-5v5h-2v-5H6v-2z"/></svg>
          </div>
          <div class="iconbtn" title="More">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="#fff"><circle cx="12" cy="5" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="19" r="2"/></svg>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="card">
          <div class="sub" style="font-weight:900;opacity:.9">Current Balance</div>
          <div class="titleLg" id="checkingBal">$414.00</div>
          <div class="sub" style="margin-top:6px">Account: <strong>501262431</strong> • Routing: <strong>072000326</strong></div>
        </div>

        <div class="row2">
          <button class="btn" id="chkWithdrawBtn">Withdraw</button>
          <button class="btn light" id="chkAddBtn">Add Money</button>
        </div>

        <div class="pill" id="gotoSavings" style="margin:14px 2px 0">
          <strong>Savings</strong><span class="sp"></span><strong id="savingsSmall">$70.19</strong>
        </div>

        <div class="pill" style="margin:12px 2px 0;justify-content:center">
          <strong>Pay Over Time</strong>
        </div>

        <div class="sectionTitle">Latest Transactions</div>
        <div class="listWrap" id="chkTxnList">
          <div class="empty">No transactions yet</div>
        </div>
      </div>
    </section>
  </div>
</div>

<!-- MONEY KEYPAD SHEET (shared) -->
<div class="moneySheet" id="moneySheet" aria-hidden="true">
  <div class="msTop">
    <button class="link" id="msCancel">Cancel</button>
    <div id="msTitle" style="font-weight:800">Add Money</div>
    <button class="action" id="msNext">Next</button>
  </div>
  <div class="msAmount">
    <div class="amt" id="msAmt">$0</div>
    <div class="msAvail" id="msAvail"></div>
  </div>
  <div class="pad">
    <div class="gridPad">
      <button data-k="1">1</button><button data-k="2">2</button><button data-k="3">3</button>
      <button data-k="4">4</button><button data-k="5">5</button><button data-k="6">6</button>
      <button data-k="7">7</button><button data-k="8">8</button><button data-k="9">9</button>
    </div>
    <div class="padRow">
      <button class="keyWide" data-k=".">.</button>
      <button class="keyWide" data-k="0">0</button>
      <button class="keyWide" id="msBack">⌫</button>
    </div>
  </div>
</div>

<!-- STAGE 2: TRANSFER CARD -->
<div class="transferStage" id="transferStage" aria-hidden="true">
  <div class="transferCard">
    <div class="tcHead" id="tcHead">Transfer</div>
    <div class="tcBody">
      <div class="mini">Amount</div>
      <div class="box"><div class="amountBig" id="tcAmt">$0.00</div></div>

      <div class="mini" id="fromLabel">Transfer from</div>
      <div class="box" id="fromBox"><span id="fromVal">—</span></div>

      <div class="mini" id="toLabel" style="margin-top:12px">To</div>
      <div class="select">
        <div class="box" id="toBox" style="cursor:pointer">
          <span id="toVal">Choose account</span>
          <svg viewBox="0 0 24 24" width="18" height="18" fill="#aab0b6"><path d="M7 10l5 5 5-5z"/></svg>
        </div>
        <div class="menu" id="toMenu"></div>
      </div>
    </div>
    <div class="tcFoot">
      <button class="btnGray" id="tcCancel">Cancel</button>
      <button class="btnGreen" id="tcGo">Transfer</button>
    </div>
  </div>
</div>

<script>
(()=>{

/* ----------------------- STATE ----------------------- */
const app = document.getElementById('app');
const moneySheet = document.getElementById('moneySheet');
const msTitle = document.getElementById('msTitle');
const msNext = document.getElementById('msNext');
const msCancel = document.getElementById('msCancel');
const msAmt = document.getElementById('msAmt');
const msAvail = document.getElementById('msAvail');

const transferStage = document.getElementById('transferStage');
const tcHead = document.getElementById('tcHead');
const tcAmt = document.getElementById('tcAmt');
const fromVal = document.getElementById('fromVal');
const toVal = document.getElementById('toVal');
const toMenu = document.getElementById('toMenu');
const tcGo = document.getElementById('tcGo');
const tcCancel = document.getElementById('tcCancel');

const savingsBalEl  = document.getElementById('savingsBal');
const checkingBalEl = document.getElementById('checkingBal');
const savingsSmall  = document.getElementById('savingsSmall');
const checkingSmall = document.getElementById('checkingSmall');

/* simple numbers to show balances */
let SAVINGS_BAL = 70.19;
let CHECKING_BAL = 414.00;

function fmt(n){ return n.toLocaleString(undefined,{style:'currency',currency:'USD'}) }
function last4(n){ return String(n).slice(-4) }

/* refresh tiny mirrors */
function applyBalances(){
  savingsBalEl.textContent = fmt(SAVINGS_BAL);
  checkingBalEl.textContent = fmt(CHECKING_BAL);
  savingsSmall.textContent = fmt(SAVINGS_BAL);
  checkingSmall.textContent = fmt(CHECKING_BAL);
}
applyBalances();

/* navigation between Savings / Checking via pills */
document.getElementById('gotoChecking').addEventListener('click', ()=> app.className='app pos-checking');
document.getElementById('gotoSavings').addEventListener('click',  ()=> app.className='app pos-savings');

/* ----------------- MONEY SHEET (NUM PAD) ----------------- */
let sheetCtx = {account:'savings', action:'add'}; // action: 'add' | 'withdraw'
let entry = '0';

function openMoneySheet({account,action}){
  sheetCtx = {account, action};
  entry='0'; renderEntry();
  const title = action==='add' ? 'Add Money' : 'Withdraw';
  msTitle.textContent = title;
  msNext.textContent = action==='add' ? 'Add' : 'Next';
  msNext.classList.remove('enabled');
  const avail = account==='savings' ? SAVINGS_BAL : CHECKING_BAL;
  msAvail.textContent = (action==='withdraw') ? `Available: ${fmt(avail)}` : '';
  moneySheet.classList.add('active');
}
function closeMoneySheet(){ moneySheet.classList.remove('active'); }

function renderEntry(){
  // sanitize entry (allow only one dot)
  const parts = entry.split('.');
  if(parts.length>2){ entry = parts[0]+'.'+parts.slice(1).join(''); }
  if(entry==='') entry='0';
  // format
  let val = Number(entry);
  if(!isFinite(val)) val = 0;
  msAmt.textContent = (entry.indexOf('.')>-1) ? `$${entry}` : `$${val.toLocaleString()}`
  msNext.classList.toggle('enabled', val>0);
}

document.querySelectorAll('[data-k]').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const k = btn.getAttribute('data-k');
    if(k==='.' && entry.includes('.')) return;
    if(entry==='0' && k!==' .'){ entry = (k==='.')?'0.':String(k); }
    else { entry += k; }
    renderEntry();
  });
});
document.getElementById('msBack').addEventListener('click', ()=>{
  if(entry.length<=1){ entry='0'; } else { entry = entry.slice(0,-1); }
  renderEntry();
});
msCancel.addEventListener('click', closeMoneySheet);

/* -------------- STAGE 2: TRANSFER CARD (no-op) -------------- */
let chosenAccount = null;

function openTransferCard(){
  const amt = Number(entry);
  tcAmt.textContent = fmt(amt);
  tcHead.textContent = (sheetCtx.action==='add'?'Add Money':'Withdraw');

  const SAV_LAST4 = last4(102979124); // Savings account
  const CHK_LAST4 = last4(501262431); // Checking account

  // Set "From" / "To" defaults depending on action + page
  chosenAccount = null;
  toVal.textContent = 'Choose account';
  tcGo.classList.remove('enabled');

  if(sheetCtx.action==='withdraw'){
    // From = current account; To = dropdown
    fromVal.textContent = (sheetCtx.account==='savings')
      ? `SAVINGS (…${SAV_LAST4})`
      : `CHECKING (…${CHK_LAST4})`;

    toMenu.innerHTML = '';
    const opts = (sheetCtx.account==='savings')
      ? [`CHECKING (…${CHK_LAST4})`,`TOTAL CHECKING (…6750)`]
      : [`SAVINGS (…${SAV_LAST4})`,`TOTAL CHECKING (…6750)`];
    opts.forEach(label=>{
      const b=document.createElement('button'); b.textContent=label;
      b.addEventListener('click',()=>{ chosenAccount=label; toVal.textContent=label; toMenu.classList.remove('show'); tcGo.classList.add('enabled'); });
      toMenu.appendChild(b);
    });

  }else{ // ADD
    // From = dropdown; To = current account
    fromVal.textContent = 'Choose account (from)';
    toVal.textContent   = (sheetCtx.account==='savings')
      ? `SAVINGS (…${SAV_LAST4})`
      : `CHECKING (…${CHK_LAST4})`;

    toMenu.innerHTML = '';
    const opts = (sheetCtx.account==='savings')
      ? [`CHECKING (…${CHK_LAST4})`,`TOTAL CHECKING (…6750)`]
      : [`SAVINGS (…${SAV_LAST4})`,`TOTAL CHECKING (…6750)`];
    // reuse "toMenu" as the dropdown for the selectable side (here it's the FROM)
    opts.forEach(label=>{
      const b=document.createElement('button'); b.textContent=label;
      b.addEventListener('click',()=>{ chosenAccount=label; fromVal.textContent=label; toMenu.classList.remove('show'); tcGo.classList.add('enabled'); });
      toMenu.appendChild(b);
    });
  }

  transferStage.classList.add('active');
}
function closeTransferCard(){ transferStage.classList.remove('active'); chosenAccount=null; }

/* Toggle dropdown */
document.getElementById('toBox').addEventListener('click', ()=>{ toMenu.classList.toggle('show'); });
tcCancel.addEventListener('click', ()=>{ closeTransferCard(); closeMoneySheet(); });
tcGo.addEventListener('click', ()=>{ /* intentionally no functionality yet */ });

/* Wire flows */
msNext.addEventListener('click', ()=>{
  if(!msNext.classList.contains('enabled')) return;
  // Smoothly move to stage 2
  openTransferCard();
  closeMoneySheet();
});

/* Buttons on Savings */
document.getElementById('savWithdrawBtn').addEventListener('click', ()=>openMoneySheet({account:'savings',action:'withdraw'}));
document.getElementById('savAddBtn').addEventListener('click',      ()=>openMoneySheet({account:'savings',action:'add'}));
/* Buttons on Checking */
document.getElementById('chkWithdrawBtn').addEventListener('click', ()=>openMoneySheet({account:'checking',action:'withdraw'}));
document.getElementById('chkAddBtn').addEventListener('click',      ()=>openMoneySheet({account:'checking',action:'add'}));

/* -----------------------------------------------------------------
   (The transactions system & add-transaction popups you already
    have can continue to live alongside this. This file focuses on
    the new Add/Withdraw flows with the keypad and transfer card.)
   ----------------------------------------------------------------- */

})();
</script>
</body>
</html>
